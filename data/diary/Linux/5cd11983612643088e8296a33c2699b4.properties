{
	"title":"linux 添加服务",
	"updateTime":"2018-05-11 15:37:13",
	"content":"#!/bin/sh \n# \n# Startup script for the Apache Web Server \n# \n# chkconfig: 345 85 15 （这个比较有意思，345代表在设置在那个level中是on的，如果一个都不想on，那就写一个横线\"-\"，比如：chkconfig: - 85 15。后面两个数字当然代表S和K的默认排序号啦）\n# description: Apache is a World Wide Web server.  It is used to serve \\ \n#              HTML files and CGI. \n# processname: httpd \n# pidfile: /var/run/httpd.pid \n# config: /usr/local/apache2/conf/httpd.conf (我装东西比较喜欢都放在/usr/local下)\n \n# Source function library.\n. /etc/rc.d/init.d/functions\n\nif [ -f /etc/sysconfig/httpd ]; then\n       . /etc/sysconfig/httpd\nfi\n\nINITLOG_ARGS\u003d\"\"\n\napachectl\u003d/usr/local/apache2/bin/apachectl\nhttpd\u003d${HTTPD-/usr/local/apache2/bin/httpd}\n\nprog\u003d\"httpd\"\n\nstart()\n{\n    ps -ef | grep \"$prog\" | grep -v \"grep\" | grep -v \"start\" \u003e /dev/null\n    if [ \"$?\" -eq \"1\" ]; then\n        echo -n $\"Starting $prog: \"\n        daemon $httpd $OPTIONS\n        ret\u003d$?\n        echo\n        [ \"$ret\" -eq \"0\" ] \u0026\u0026 touch /var/lock/subsys/httpd\n        return 0\n    else\n        echo \"httpd running\"\n        return 0\n    fi\n}\n\nstop()\n{\n    status httpd \u003e/dev/null \u003e\u00261\n    ret_status\u003d$?\n    if [ $ret_status -eq 2 ]; then\n        rm -f /var/lock/subsys/httpd /var/run/httpd.pid\n        echo \"httpd stopped\"\n        return 0\n    elif [ $ret_status -eq 3 ]; then\n        echo \"httpd stopped\"\n        return 0\n    fi\n    echo -n $\"Stopping $prog: \"\n    killproc $httpd\n    ret\u003d$?\n    echo\n    [ \"$ret\" -eq \"0\" ] \u0026\u0026 rm -f /var/lock/subsys/httpd /var/run/httpd.pid\n    return 0\n}\n\ncase \"$1\" in\n    start)\n       start\n       ;;\n    stop)\n       stop\n       ;;\n    status)\n       status httpd\n       ;;\n    restart)\n       stop\n       sleep 2\n       start\n       ;;\n    *)\n       echo $\"Usage: $prog {start|stop|restart|status}\"\n       exit 1\nesac",
	"sort":1
}