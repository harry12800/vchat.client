{
	"title":"以下为转载的增量备份方法",
	"updateTime":"2018-04-24 00:20:32",
	"content":"以下为转载的增量备份方法\r\n\r\n\r\n\r\noracle 增量导出/导入\r\n\r\n\r\n 一、   导出/导入（Export/Import）    \r\n\r\n----   利用Export可将数据从数据库中提取出来，利用Import则可将提取出来的数据送回Oracle数据库中去。    \r\n\r\n----   1.   简单导出数据（Export）和导入数据（Import）    \r\n\r\n----   Oracle支持三种类型的输出：    \r\n\r\n----   （1）表方式（T方式），将指定表的数据导出。    \r\n\r\n----   （2）用户方式（U方式），将指定用户的所有对象及数据导出。    \r\n\r\n----   （3）全库方式（Full方式），将数据库中的所有对象导出。    \r\n\r\n----   数据导出（Import）的过程是数据导入（Export）的逆过程，它们的数据流向不同。    \r\n\r\n----   2.   增量导出/导入    \r\n\r\n----   增量导出是一种常用的数据备份方法，它只能对整个数据库来实施，并且必须作为SYSTEM来导出。在进行此种导出时，系统不要求回答任何问题。导出文件名缺省为export.dmp，如果不希望自己的输出文件定名为export.dmp，必须在命令行中指出要用的文件名。    \r\n\r\n----   增量导出包括三个类型：    \r\n\r\n----   （1）“完全”增量导出（Complete）    \r\n\r\n----   即备份整个数据库，比如：    \r\n\r\n----   ＄exp   system/manager   inctype\u003dcomplete   file\u003d990702.dmp    \r\n\r\n----   （2）   “增量型”增量导出    \r\n\r\n----   备份上一次备份后改变的数据。比如：    \r\n\r\n----   ＄exp   system/manager   inctype\u003dincremental   file\u003d990702.dmp    \r\n\r\n----   （3）   “累计型”增量导出（Cumulative）    \r\n\r\n----   累计型导出方式只是导出自上次“完全”   导出之后数据库中变化了的信息。比如：    \r\n\r\n----   ＄exp   system/manager   inctype\u003dcumulative   file\u003d990702.dmp    \r\n\r\n----   数据库管理员可以排定一个备份日程表，用数据导出的三个不同方式合理高效地完成。    \r\n\r\n----   比如数据库的备份任务可作如下安排：    \r\n\r\n----   星期一：完全导出（A）    \r\n\r\n----   星期二：增量导出（B）    \r\n\r\n----   星期三：增量导出（C）    \r\n\r\n----   星期四：增量导出（D）    \r\n\r\n----   星期五：累计导出（E）    \r\n\r\n----   星期六：增量导出（F）    \r\n\r\n----   星期日：增量导出（G）    \r\n\r\n----   如果在星期日，数据库遭到意外破坏，数据库管理员可按以下步骤来恢复数据库：    \r\n\r\n----   第一步：用命令CREATE   DATABASE重新生成数据库结构；    \r\n\r\n----   第二步：创建一个足够大的附加回段。    \r\n\r\n----   第三步：完全增量导入A：    \r\n\r\n----   ＄imp   system./manager   inctype\u003d   RECTORE   FULL\u003dY   FILE\u003dA    \r\n\r\n----   第四步：累计增量导入E：    \r\n\r\n----   ＄imp   system/manager   inctype\u003d   RECTORE   FULL\u003dY   FILE   \u003dE    \r\n\r\n----   第五步：最近增量导入F：    \r\n\r\n----   ＄imp   system/manager   inctype\u003dRESTORE   FULL\u003dY   FILE\u003dF    \r\n\r\n----   二、   冷备份    \r\n\r\n----   冷备份发生在数据库已经正常关闭的情况下，当正常关闭时会提供给我们一个完整的数据库。冷备份是将关键性文件拷贝到另外位置的一种说法。对于备份Oracle信息而言，冷备份是最快和最安全的方法。冷备份的优点是：    \r\n\r\n----   1．是非常快速的备份方法（只需拷贝文件）    \r\n\r\n----   2．容易归档（简单拷贝即可）    \r\n\r\n----   3．容易恢复到某个时间点上（只需将文件再拷贝回去）    \r\n\r\n----   4．能与归档方法相结合，作数据库“最新状态”的恢复。    \r\n\r\n----   5．低度维护，高度安全。    \r\n\r\n----   但冷备份也有如下不足：    \r\n\r\n----   1．单独使用时，只能提供到“某一时间点上”的恢复。    \r\n\r\n----   2．在实施备份的全过程中，数据库必须要作备份而不能作其它工作。也就是说，在冷备份过程中，数据库必须是关闭状态。    \r\n\r\n----   3．若磁盘空间有限，只能拷贝到磁带等其它外部存储设备上，速度会很慢。    \r\n\r\n----   4．不能按表或按用户恢复。    \r\n\r\n----   如果可能的话（主要看效率），应将信息备份到磁盘上，然后启动数据库（使用户可以工作）并将所备份的信息拷贝到磁带上（拷贝的同时，数据库也可以工作）。冷备份中必须拷贝的文件包括：    \r\n\r\n----   1．所有数据文件    \r\n\r\n----   2．所有控制文件    \r\n\r\n----   3．所有联机REDO   LOG文件    \r\n\r\n----   4．Init.ora文件（可选）。    \r\n\r\n----   值得注意的是冷备份必须在数据库关闭的情况下进行，当数据库处于打开状态时，执行数据库文件系统备份是无效的    \r\n\r\n----   下面是做冷备份的完整例子：    \r\n\r\n----   （1）   关闭数据库＄sqldba   lmode\u003dy    \r\n\r\n----   SQLDBA   \u003e connect   internal;    \r\n\r\n----   SQLDBA   \u003e shutdown   normal;    \r\n\r\n----   （2）   用拷贝命令备份全部的时间文件、重做日志文件、控制文件、初始化参数文件    \r\n\r\n----   SQLDBA   \u003e !   cp   \u003c   file   \u003e   \u003c   backup   directory   \u003e    \r\n\r\n----   （3）   重启Oracle数据库    \r\n\r\n----   ＄sqldba   lmode\u003dy    \r\n\r\n----   SQLDBA   \u003e connect   internal;    \r\n\r\n----   SQLDBA   \u003e startup;    \r\n\r\n----   三、   热备份    \r\n\r\n----   热备份是在数据库运行的情况下，采用archivelog   mode方式备份数据的方法。所以，如果你有昨天夜里的一个冷备份而且又有今天的热备份文件，在发生问题时，就可以利用这些资料恢复更多的信息。热备份要求数据库在Archivelog方式下操作，并需要大量的档案空间。一旦数据库运行在archivelog状态下，就可以做备份了。热备份的命令文件由三部分组成：    \r\n\r\n----   1．数据文件一个表空间一个表空间地备份。    \r\n\r\n----   （1）设置表空间为备份状态    \r\n\r\n----   （2）备份表空间的数据文件    \r\n\r\n----   （3）恢复表空间为正常状态    \r\n\r\n----   2．备份归档log文件。    \r\n\r\n----   （1）临时停止归档进程    \r\n\r\n----   （2）log下那些在archive   redo   log目标目录中的文件    \r\n\r\n----   （3）重新启动archive进程    \r\n\r\n----   （4）备份归档的redo   log   文件    \r\n\r\n----   3．用alter   database   backup   controlfile命令来备份拷贝文件    \r\n\r\n----   热备份的优点是：    \r\n\r\n----   1．可在表空间或数据文件级备份，备份时间短。    \r\n\r\n----   2．备份时数据库仍可使用。    \r\n\r\n----   3．可达到秒级恢复（恢复到某一时间点上）。    \r\n\r\n----   4．可对几乎所有数据库实体作恢复。    \r\n\r\n----   5．恢复是快速的，在大多数情况下在数据库仍工作时恢复。    \r\n\r\n----   热备份的不足是：    \r\n\r\n----   1．不能出错，否则后果严重。    \r\n\r\n----   2．若热备份不成功，所得结果不可用于时间点的恢复。    \r\n\r\n----   3．因难于维护，所以要特别仔细小心，不允许“以失败而告终”。  \r\n\r\n\r\n来源： http://blog.csdn.net/fujianianhua/article/details/8182068",
	"sort":2
}